<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription - ProposalMate</title>
    <link rel="stylesheet" href="../css/master.css">
    <link rel="stylesheet" href="../css/mobile-menu-fix.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <a href="../index.html" class="logo">ProposalMate</a>
            </div>
            
            <div class="sidebar-menu">
                <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                <a href="proposals.html"><i class="fas fa-file-alt"></i> My Proposals</a>
                <a href="create-proposal.html"><i class="fas fa-plus-circle"></i> Create New Proposal</a>
                <a href="clients.html"><i class="fas fa-users"></i> Clients</a>
                <a href="settings.html"><i class="fas fa-cog"></i> Account Settings</a>
                <a href="subscription.html" class="active"><i class="fas fa-credit-card"></i> Subscription</a>
                <a href="../index.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="top-bar">
                <div class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
                
                <div class="user-info">
                    <a href="#" id="user-menu">
                        <span class="user-name">John Smith</span>
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="user-dropdown">
                        <a href="settings.html">Settings</a>
                        <a href="../index.html">Logout</a>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-content" id="main-content">
                <h1>Subscription</h1>
                
                <div class="subscription-container">
                    <!-- Current Plan -->
                    <div class="card">
                        <h2>Current Plan</h2>
                        <div class="current-plan">
                            <div class="plan-details">
                                <h3>Monthly Plan</h3>
                                <p class="plan-price">£7/month</p>
                                <p class="plan-status">Active</p>
                                <p class="plan-renewal">Next billing date: May 15, 2025</p>
                            </div>
                            <div class="plan-features">
                                <h4>Features</h4>
                                <ul>
                                    <li><i class="fas fa-check"></i> Unlimited proposals</li>
                                    <li><i class="fas fa-check"></i> Custom branding</li>
                                    <li><i class="fas fa-check"></i> Client management</li>
                                    <li><i class="fas fa-check"></i> PDF exports</li>
                                    <li><i class="fas fa-check"></i> Email notifications</li>
                                    <li><i class="fas fa-check"></i> Premium templates</li>
                                </ul>
                            </div>
                        </div>
                        <div class="plan-actions">
                            <button class="ghost-btn" id="change-plan">Change Plan</button>
                            <button class="ghost-btn-danger" id="cancel-subscription">Cancel Subscription</button>
                        </div>
                    </div>
                    
                    <!-- Payment Method -->
                    <div class="card">
                        <h2>Payment Method</h2>
                        <div class="payment-method">
                            <div class="card-info">
                                <div class="card-icon">
                                    <i class="fab fa-cc-visa"></i>
                                </div>
                                <div class="card-details">
                                    <p class="card-number">Visa ending in 4242</p>
                                    <p class="card-expiry">Expires 12/2026</p>
                                </div>
                            </div>
                            <div class="payment-actions">
                                <button class="ghost-btn" id="update-payment">Update Payment Method</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Billing History -->
                    <div class="card">
                        <h2>Billing History</h2>
                        <div class="billing-history">
                            <table class="billing-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Description</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Invoice</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>April 15, 2025</td>
                                        <td>Monthly Subscription</td>
                                        <td>£7.00</td>
                                        <td><span class="status-badge success">Paid</span></td>
                                        <td><a href="#" class="invoice-link"><i class="fas fa-download"></i> PDF</a></td>
                                    </tr>
                                    <tr>
                                        <td>March 15, 2025</td>
                                        <td>Monthly Subscription</td>
                                        <td>£7.00</td>
                                        <td><span class="status-badge success">Paid</span></td>
                                        <td><a href="#" class="invoice-link"><i class="fas fa-download"></i> PDF</a></td>
                                    </tr>
                                    <tr>
                                        <td>February 15, 2025</td>
                                        <td>Monthly Subscription</td>
                                        <td>£7.00</td>
                                        <td><span class="status-badge success">Paid</span></td>
                                        <td><a href="#" class="invoice-link"><i class="fas fa-download"></i> PDF</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Change Plan Modal -->
    <div class="modal" id="change-plan-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Change Subscription Plan</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="plans-container">
                    <div class="plan-option">
                        <div class="plan-header">
                            <h3>Monthly</h3>
                            <p class="plan-price">£7<span>/month</span></p>
                        </div>
                        <div class="plan-features">
                            <ul>
                                <li><i class="fas fa-check"></i> Unlimited proposals</li>
                                <li><i class="fas fa-check"></i> Custom branding</li>
                                <li><i class="fas fa-check"></i> Client management</li>
                                <li><i class="fas fa-check"></i> PDF exports</li>
                                <li><i class="fas fa-check"></i> Email notifications</li>
                                <li><i class="fas fa-check"></i> Premium templates</li>
                            </ul>
                        </div>
                        <div class="plan-action">
                            <button class="elevated-btn plan-select" data-plan="monthly" disabled>Current Plan</button>
                        </div>
                    </div>
                    
                    <div class="plan-option">
                        <div class="plan-header">
                            <h3>Annual</h3>
                            <p class="plan-price">£70<span>/year</span></p>
                            <p class="plan-save">Save £14 (16%)</p>
                        </div>
                        <div class="plan-features">
                            <ul>
                                <li><i class="fas fa-check"></i> Unlimited proposals</li>
                                <li><i class="fas fa-check"></i> Custom branding</li>
                                <li><i class="fas fa-check"></i> Client management</li>
                                <li><i class="fas fa-check"></i> PDF exports</li>
                                <li><i class="fas fa-check"></i> Email notifications</li>
                                <li><i class="fas fa-check"></i> Premium templates</li>
                                <li><i class="fas fa-check"></i> Priority support</li>
                            </ul>
                        </div>
                        <div class="plan-action">
                            <button class="elevated-btn plan-select" data-plan="annual">Switch to Annual</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="ghost-btn" id="cancel-plan-change">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Cancel Subscription Modal -->
    <div class="modal" id="cancel-subscription-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Cancel Subscription</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your current billing period.</p>
                
                <div class="cancellation-survey">
                    <h3>We're sorry to see you go</h3>
                    <p>Please let us know why you're cancelling:</p>
                    
                    <div class="form-group">
                        <select id="cancellation-reason">
                            <option value="">Select a reason...</option>
                            <option value="too_expensive">Too expensive</option>
                            <option value="missing_features">Missing features I need</option>
                            <option value="not_using">Not using it enough</option>
                            <option value="switching">Switching to another service</option>
                            <option value="temporary">Temporary pause, will return later</option>
                            <option value="other">Other reason</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="cancellation-feedback">Additional feedback (optional)</label>
                        <textarea id="cancellation-feedback" rows="3" placeholder="Tell us more about your experience..."></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="ghost-btn" id="keep-subscription">Keep Subscription</button>
                <button class="elevated-btn-danger" id="confirm-cancellation">Cancel Subscription</button>
            </div>
        </div>
    </div>
    
    <!-- Update Payment Modal -->
    <div class="modal" id="update-payment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Update Payment Method</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div id="payment-form-container">
                    <!-- Stripe Elements will be inserted here -->
                    <div class="form-group">
                        <label for="card-element">Credit or debit card</label>
                        <div id="card-element" class="card-element">
                            <!-- Stripe Card Element will be inserted here -->
                            <div class="card-placeholder">
                                <div class="card-fields">
                                    <div class="card-field">
                                        <input type="text" placeholder="1234 1234 1234 1234" disabled>
                                    </div>
                                    <div class="card-field-group">
                                        <input type="text" placeholder="MM/YY" disabled>
                                        <input type="text" placeholder="CVC" disabled>
                                    </div>
                                </div>
                                <div class="card-brands">
                                    <i class="fab fa-cc-visa"></i>
                                    <i class="fab fa-cc-mastercard"></i>
                                    <i class="fab fa-cc-amex"></i>
                                    <i class="fab fa-cc-discover"></i>
                                </div>
                            </div>
                        </div>
                        <div id="card-errors" role="alert"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="ghost-btn" id="cancel-payment-update">Cancel</button>
                <button class="elevated-btn" id="submit-payment-update">Update Payment Method</button>
            </div>
        </div>
    </div>
    
    <script src="../js/api.js"></script>
    <script src="../js/navigation.js"></script>
    <script src="../js/subscription.js"></script>
</body>
</html>
