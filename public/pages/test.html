<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProposalMate - User Flow Test</title>
    <link rel="stylesheet" href="/css/master.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/mobile-menu.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 6px;
        }
        
        .test-section h3 {
            margin-top: 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .test-button {
            display: inline-block;
            padding: 10px 15px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: background-color 0.3s ease;
        }
        
        .test-button:hover {
            background-color: #3a7bc8;
        }
        
        .test-results {
            margin-top: 15px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 4px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .test-pass {
            color: #2E7D32;
        }
        
        .test-fail {
            color: #C62828;
        }
        
        .test-info {
            color: #0277BD;
        }
        
        .viewport-info {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <a href="/index.html">ProposalMate</a>
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="/index.html">Home</a></li>
                <li><a href="/pages/features.html">Features</a></li>
                <li><a href="/pages/pricing.html">Pricing</a></li>
                <li><a href="/pages/templates.html">Templates</a></li>
                <li><a href="/pages/login.html" class="login-btn">Login</a></li>
                <li><a href="/pages/signup.html" class="signup-btn">Sign Up</a></li>
            </ul>
        </nav>
        <button class="hamburger-menu">&#9776;</button>
    </header>

    <div class="test-container">
        <div class="test-header">
            <h1>ProposalMate User Flow Test</h1>
            <p>This page allows you to test all core user flows and functionality in the ProposalMate application.</p>
        </div>
        
        <div class="test-section">
            <h3>Navigation Tests</h3>
            <button class="test-button" id="test-hamburger">Test Hamburger Menu</button>
            <button class="test-button" id="test-navigation">Test Navigation Links</button>
            <div class="test-results" id="navigation-results"></div>
        </div>
        
        <div class="test-section">
            <h3>Authentication Tests</h3>
            <button class="test-button" id="test-login-form">Test Login Form</button>
            <button class="test-button" id="test-signup-form">Test Signup Form</button>
            <button class="test-button" id="test-auth-flow">Test Auth Flow</button>
            <div class="test-results" id="auth-results"></div>
        </div>
        
        <div class="test-section">
            <h3>Templates Tests</h3>
            <button class="test-button" id="test-templates-load">Test Templates Loading</button>
            <button class="test-button" id="test-template-selection">Test Template Selection</button>
            <div class="test-results" id="templates-results"></div>
        </div>
        
        <div class="test-section">
            <h3>Proposal Tests</h3>
            <button class="test-button" id="test-proposal-create">Test Proposal Creation</button>
            <button class="test-button" id="test-proposal-view">Test Proposal Viewing</button>
            <button class="test-button" id="test-proposal-edit">Test Proposal Editing</button>
            <div class="test-results" id="proposal-results"></div>
        </div>
        
        <div class="test-section">
            <h3>API Client Tests</h3>
            <button class="test-button" id="test-api-client">Test API Client</button>
            <button class="test-button" id="test-api-endpoints">Test API Endpoints</button>
            <div class="test-results" id="api-results"></div>
        </div>
    </div>
    
    <div class="viewport-info" id="viewport-info">
        Viewport: <span id="viewport-width">0</span>px Ã— <span id="viewport-height">0</span>px
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>ProposalMate</h3>
                <p>Create professional proposals in minutes.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/pages/features.html">Features</a></li>
                    <li><a href="/pages/pricing.html">Pricing</a></li>
                    <li><a href="/pages/templates.html">Templates</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p>Email: hello@proposalmate.com</p>
                <p>Phone: (800) 456-7890</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 ProposalMate. All rights reserved.</p>
        </div>
    </footer>

    <script src="/js/api.js"></script>
    <script src="/js/hamburger-menu.js"></script>
    <script src="/js/user-flow-test.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Update viewport size info
            function updateViewportInfo() {
                document.getElementById('viewport-width').textContent = window.innerWidth;
                document.getElementById('viewport-height').textContent = window.innerHeight;
            }
            
            updateViewportInfo();
            window.addEventListener('resize', updateViewportInfo);
            
            // Log test results
            function logResult(container, status, message) {
                const resultElement = document.createElement('div');
                resultElement.className = `test-${status.toLowerCase()}`;
                resultElement.textContent = `[${status.toUpperCase()}] ${message}`;
                container.appendChild(resultElement);
                container.scrollTop = container.scrollHeight;
            }
            
            // Test hamburger menu
            document.getElementById('test-hamburger').addEventListener('click', function() {
                const resultsContainer = document.getElementById('navigation-results');
                resultsContainer.innerHTML = '';
                
                try {
                    const hamburgerButton = document.querySelector('.hamburger-menu');
                    
                    if (!hamburgerButton) {
                        logResult(resultsContainer, 'FAIL', 'Hamburger button not found');
                        return;
                    }
                    
                    logResult(resultsContainer, 'INFO', 'Hamburger button found, clicking...');
                    hamburgerButton.click();
                    
                    setTimeout(() => {
                        const mobileMenu = document.querySelector('.mobile-menu');
                        
                        if (!mobileMenu) {
                            logResult(resultsContainer, 'FAIL', 'Mobile menu not created after click');
                            return;
                        }
                        
                        logResult(resultsContainer, 'PASS', 'Mobile menu created successfully');
                        
                        const menuStyle = window.getComputedStyle(mobileMenu);
                        const isVisible = menuStyle.transform !== 'translateX(100%)';
                        
                        if (!isVisible) {
                            logResult(resultsContainer, 'FAIL', 'Mobile menu not visible after click');
                        } else {
                            logResult(resultsContainer, 'PASS', 'Mobile menu visible after click');
                        }
                        
                        const closeButton = mobileMenu.querySelector('.close-menu');
                        
                        if (!closeButton) {
                            logResult(resultsContainer, 'FAIL', 'Close button not found');
                        } else {
                            logResult(resultsContainer, 'PASS', 'Close button found, clicking...');
                            closeButton.click();
                            
                            setTimeout(() => {
                                const menuStyleAfterClose = window.getComputedStyle(mobileMenu);
                                const isHidden = menuStyleAfterClose.transform === 'translateX(100%)';
                                
                                if (!isHidden) {
                                    logResult(resultsContainer, 'FAIL', 'Mobile menu not hidden after close');
                                } else {
                                    logResult(resultsContainer, 'PASS', 'Mobile menu hidden after close');
                                }
                            }, 400);
                        }
                    }, 400);
                } catch (error) {
                    logResult(resultsContainer, 'FAIL', `Error: ${error.message}`);
                }
            });
            
            // Test navigation links
            document.getElementById('test-navigation').addEventListener('click', function() {
                const resultsContainer = document.getElementById('navigation-results');
                resultsContainer.innerHTML = '';
                
                try {
                    const navLinks = document.querySelectorAll('.nav-links a');
                    
                    if (navLinks.length === 0) {
                        logResult(resultsContainer, 'FAIL', 'No navigation links found');
                        return;
                    }
                    
                    logResult(resultsContainer, 'PASS', `Found ${navLinks.length} navigation links`);
                    
                    let brokenLinks = 0;
                    navLinks.forEach(link => {
                        const href = link.getAttribute('href');
                        const text = link.textContent.trim();
                        
                        if (!href || href === '#' || href === 'javascript:void(0)') {
                            logResult(resultsContainer, 'FAIL', `Link "${text}" has invalid href: ${href}`);
                            brokenLinks++;
                        } else {
                            logResult(resultsContainer, 'INFO', `Link "${text}" has href: ${href}`);
                        }
                    });
                    
                    if (brokenLinks === 0) {
                        logResult(resultsContainer, 'PASS', 'All navigation links have valid hrefs');
                    }
                } catch (error) {
                    logResult(resultsContainer, 'FAIL', `Error: ${error.message}`);
                }
            });
            
            // Test API client
            document.getElementById('test-api-client').addEventListener('click', function() {
                const resultsContainer = document.getElementById('api-results');
                resultsContainer.innerHTML = '';
                
                try {
                    if (typeof ApiClient === 'undefined' && typeof getApiClient === 'undefined') {
                        logResult(resultsContainer, 'FAIL', 'API client not found');
                        return;
                    }
                    
                    const api = window.getApiClient ? getApiClient() : new ApiClient();
                    
                    if (!api) {
                        logResult(resultsContainer, 'FAIL', 'Could not create API client instance');
                        return;
                    }
                    
                    logResult(resultsContainer, 'PASS', 'API client instance created successfully');
                    
                    const requiredMethods = ['login', 'register', 'getProposals', 'createProposal', 'getTemplates'];
                    
                    requiredMethods.forEach(method => {
                        if (typeof api[method] !== 'function') {
                            logResult(resultsContainer, 'FAIL', `Method "${method}" not found`);
                        } else {
                            logResult(resultsContainer, 'PASS', `Method "${method}" found`);
                        }
                    });
                } catch (error) {
                    logResult(resultsContainer, 'FAIL', `Error: ${error.message}`);
                }
            });
            
            // Add more test implementations for other buttons...
        });
    </script>
</body>
</html>
